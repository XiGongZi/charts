<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- <link rel="stylesheet" href="index.css" /> -->
</head>

<body>
    <button onclick="start()">start</button>
    <button onclick="over()">over</button>
    <div class="" style="height:400px;padding:20px;background-color: rgb(65, 65, 65);">
        <div class="" id="app2" style="width:100%;height:100%"></div>
    </div>
</body>
<script type="module">
    import {RFCharts} from "../src/createCanvas.ts"
    import {GetSocketData} from "../src/getSocketData.ts"
    import {debounce} from "lodash"
// 暂时只考虑waterfall
    let app0 = new RFCharts();
    let canvas = app0.init(document.getElementById('app2'));
    canvas.setOptions();
    // canvas.setCanvas();
    // 绑定start事件 执行resize方法
    let socket = new GetSocketData();
    window.start = function() {
        socket.start((x,y) => {
            // console.log(x,y);
            // flow.update(x,y);
            canvas.update(y);
        })
    }
    window.over = function() {
        socket.stop();
    }
    // 当windows 尺寸变化时，调用canvas.resize() 重新设置canvas的尺寸
    window.onresize = debounce(() => {
        canvas.resize();
    },80)
    // 当 windows尺寸变化时，且 持续200ms windows 尺寸不变化时，调用canvas.resize() 重新设置canvas的尺寸

    
</script>

</html>